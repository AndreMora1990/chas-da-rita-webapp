<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Ch√°s da Rita - Gest√£o de Produtos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; background: #f4f0e5; color: #3e2a1c; padding: 2rem; }
    h1 { font-size: 2em; margin-bottom: 1rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 1rem; }
    .card { background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 0 5px rgba(0,0,0,0.1); cursor: pointer; }
    .card:hover { background: #fcefdc; }
    .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.3); display: none; z-index: 100; }
    .modal input, .modal select { padding: 0.5rem; margin-top: 0.5rem; width: 100%; }
    .modal button { margin-top: 1rem; padding: 0.5rem 1rem; }
    #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); display: none; z-index: 99; }
    .actions button { margin-right: 0.5rem; }
  </style>
</head>
<body>
  <h1>Ch√°s da Rita üåø</h1>
  <button onclick="abrirGestao()">‚öôÔ∏è Gerir Produtos</button>
  <button onclick="adicionarProduto()">‚ûï Adicionar Produto</button>
  <p>Seleciona uma categoria:</p>
  <div class="grid" id="categorias">
    <div class="card" onclick="mostrarProdutos('Ch√°s')">üçµ Ch√°s</div>
    <div class="card" onclick="mostrarProdutos('Tisanas')">üåø Tisanas</div>
    <div class="card" onclick="mostrarProdutos('Especiarias')">üßÇ Especiarias</div>
    <div class="card" onclick="mostrarProdutos('Acess√≥rios')">ü´ñ Acess√≥rios</div>
    <div class="card" onclick="mostrarProdutos('Biscoitos')">üç™ Biscoitos</div>
    <div class="card" onclick="mostrarProdutos('Am√™ndoas')">üå∞ Am√™ndoas</div>
    <div class="card" onclick="mostrarProdutos('Outros')">‚ú® Outros</div>
  </div>

  <hr />
  <h2>Produtos</h2>
  <div id="produtos" class="grid"></div>

  <div id="overlay"></div>

  <div id="modalGestao" class="modal">
    <h3>Gest√£o de Produtos</h3>
    <div id="listaProdutos"></div>
    <button onclick="fecharModal()">Fechar</button>
  </div>

  <div id="modalEditar" class="modal">
    <h3 id="tituloModalProduto">Produto</h3>
    <input type="text" id="inputNome" placeholder="Nome do produto" />
    <select id="inputCategoria">
      <option>Ch√°s</option><option>Tisanas</option><option>Especiarias</option>
      <option>Acess√≥rios</option><option>Biscoitos</option><option>Am√™ndoas</option><option>Outros</option>
    </select>
    <input type="number" id="inputQuantidade" placeholder="Quantidade padr√£o (g/unid.)" />
    <input type="number" id="inputPreco" placeholder="Pre√ßo (‚Ç¨)" />
    <button onclick="guardarProduto()">Guardar</button>
    <button onclick="fecharModal()">Cancelar</button>
  </div>

  <script>
    let produtos = {
      'Ch√°s': [
        { nome: 'Ch√° de L√∫cia-lima', quantidade: 50, preco: 2.00 },
        { nome: 'Ch√° Verde', quantidade: 100, preco: 3.50 }
      ]
    };

    let editarRef = null;

    function mostrarProdutos(categoria) {
      const container = document.getElementById('produtos');
      container.innerHTML = '';
      (produtos[categoria] || []).forEach(p => {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerText = `${p.nome}\n${p.quantidade}g - ‚Ç¨${p.preco.toFixed(2)}`;
        container.appendChild(div);
      });
    }

    function abrirGestao() {
      const lista = document.getElementById('listaProdutos');
      lista.innerHTML = '';
      Object.keys(produtos).forEach(cat => {
        produtos[cat].forEach((p, i) => {
          const linha = document.createElement('div');
          linha.innerHTML = `
            <strong>${p.nome}</strong> (${cat}) - ${p.quantidade}g - ‚Ç¨${p.preco.toFixed(2)}
            <div class="actions">
              <button onclick="editarProduto('${cat}', ${i})">‚úèÔ∏è Editar</button>
              <button onclick="eliminarProduto('${cat}', ${i})">üóëÔ∏è Apagar</button>
            </div>`;
          lista.appendChild(linha);
        });
      });
      document.getElementById('modalGestao').style.display = 'block';
      document.getElementById('overlay').style.display = 'block';
    }

    function fecharModal() {
      document.getElementById('modalGestao').style.display = 'none';
      document.getElementById('modalEditar').style.display = 'none';
      document.getElementById('overlay').style.display = 'none';
      editarRef = null;
    }

    function editarProduto(categoria, index) {
      editarRef = { categoria, index };
      const p = produtos[categoria][index];
      document.getElementById('inputNome').value = p.nome;
      document.getElementById('inputCategoria').value = categoria;
      document.getElementById('inputQuantidade').value = p.quantidade;
      document.getElementById('inputPreco').value = p.preco;
      document.getElementById('tituloModalProduto').innerText = 'Editar Produto';
      document.getElementById('modalEditar').style.display = 'block';
      document.getElementById('overlay').style.display = 'block';
    }

    function adicionarProduto() {
      editarRef = null;
      document.getElementById('inputNome').value = '';
      document.getElementById('inputCategoria').value = 'Ch√°s';
      document.getElementById('inputQuantidade').value = '';
      document.getElementById('inputPreco').value = '';
      document.getElementById('tituloModalProduto').innerText = 'Adicionar Produto';
      document.getElementById('modalEditar').style.display = 'block';
      document.getElementById('overlay').style.display = 'block';
    }

    function guardarProduto() {
      const nome = document.getElementById('inputNome').value;
      const cat = document.getElementById('inputCategoria').value;
      const q = parseFloat(document.getElementById('inputQuantidade').value);
      const p = parseFloat(document.getElementById('inputPreco').value);
      if (!nome || isNaN(q) || isNaN(p)) {
        alert('Preenche todos os campos!');
        return;
      }
      if (!produtos[cat]) produtos[cat] = [];
      if (editarRef) {
        produtos[editarRef.categoria].splice(editarRef.index, 1);
      }
      produtos[cat].push({ nome, quantidade: q, preco: p });
      fecharModal();
      abrirGestao();
    }

    function eliminarProduto(categoria, index) {
      if (confirm('Tens a certeza que queres apagar este produto?')) {
        produtos[categoria].splice(index, 1);
        abrirGestao();
      }
    }
  </script>
</body>
</html>
